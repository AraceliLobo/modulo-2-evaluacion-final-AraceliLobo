"use strict";const inputSearch=document.querySelector(".js-search"),seriesList=document.querySelector(".js-seriesList"),favList=document.querySelector(".js-favList"),btnSearch=document.querySelector(".js-btnSsearch"),btnRemove=document.querySelector(".js-btnRemoveAll");let shows=[],favorites=[];function getShows(e){e.preventDefault();const s=inputSearch.value;fetch("http://api.tvmaze.com/search/shows?q="+s).then((function(e){return e.json()})).then((function(e){shows=e,paintSeries(),listenSeries(),paintFavorites()}))}function paintSeries(){let e="";for(let s=0;s<shows.length;s++){let t="";t=-1!==favorites.findIndex((function(e){return e.id===shows[s].show.id}))?"fav-item":"",e+=`<li class="serie-item js-item ${t}" id="${shows[s].show.id}">`,e+=`<h3 class= "serie-name js-name">${shows[s].show.name}</h3>`,null===shows[s].show.image?e+='<img class="serie-image js-image" src="./assets/images/noimage.png"/>':(e+=`<img class="serie-image js-image" src="${shows[s].show.image.medium}"/>`,e+="</li>"),seriesList.innerHTML=e}}function favoritesSeries(e){const s=parseInt(e.currentTarget.id),t=favorites.findIndex((function(e){return e.id===s}));if(!0===(-1!==t))favorites.splice(t,1);else for(let e=0;e<shows.length;e++)shows[e].show.id===s&&favorites.push(shows[e].show);paintSeries(),listenSeries(),paintFavorites()}function listenSeries(){const e=document.querySelectorAll(".js-item");for(const s of e)s.addEventListener("click",favoritesSeries)}function paintFavorites(){let e="";for(let s=0;s<shows.length;s++)e+=`<li class="fav-item" id="${favorites[s].id}">`,e+=`<h3 class="fav-name">${favorites[s].name}</h3>`,null===favorites[s].image?e+='<img class="fav-image" src="./assets/images/noimage.png"/>':e+=`<img class="fav-image" src="${favorites[s].image.medium}"/>`,e+="</li>",favList.innerHTML=e}function setLocalStorage(){localStorage.setItem("favorites",JSON.stringify(favorites))}function getLocalStorage(){localStorage.getItem("favorites");const e=JSON.parse(favorites);null!==e&&(favorites=e,paintFavorites())}setLocalStorage(),btnSearch.addEventListener("click",getShows);